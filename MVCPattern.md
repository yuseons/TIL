# 🔸 MVC(Model, View, Controller) Pattern



## ◻ MVC Pattern

\- MVC 패턴은 모델(Model), 뷰(View), 컨트롤러(Controller) 로 이루어진다.

\- 웹 응용프로그램을 구성하는 서버 모듈을 사용자에게 보여주는 것은 뷰(View), 

​	자료와 비즈니스 로직 처리를 모델(Model), 

​	이들 상호 간의 흐름을 제어하는 컨트롤러(Controller)로 분리하여 개발한다.

\- MVC는 새로운 개발 방법이 아니라 기존의 MVC 개발 모델이 웹 응용프로그램 개발에도 적합하다는 것이 입증되어, JSP개발자들에게 권고하는 개발 모델이다.



### 비즈니스 로직과 표현의 분리

- 장점
  \- 디자이너는 표현에 집중, 프로그래머는 비즈니스 로직에 전념하여 개발하므로 효율성이 높아진다.

  \- 웹 응용프로그램의 수정이 쉽다.

  \- 웹 응용프로그램의 확장이 쉽다.

  \- 웹 응용프로그램의 유지보수가 쉽다.

  \- jsp와 javabeans로 개발한 경우는 비즈니스 로직과 표현을 완전히 분리하기 쉽지 않을 뿐 아니라 프로젝트 규모가 커질수록 더욱 어려움 생긴다.

  \- 이러한 문제의 해결책으로 웹 응용프로그램을 비즈니스 로직과 표현으로 분리하여 개발하고자 하는 것이 MVC 모델이다.

![mvc]()

![MVC2]()



## ◻ MVC 개발

### [1] JSP+JavaBeans개발과 MVC 모델 구조
#### 1. Model 1 (JSP+JavaBeans) 의 구조 

![model1]())

\- 브라우저의 요청을 **JSP가 전부 다 처리**한다.
\- 웹 브라우저의 요청을 받은 JSP는 자바빈이나 서비스 클래스를 사용해서 작업을 처리하고, 결과를 클라이언트에 출력한다.

-  요청과 응답 모두 JSP가 처리한다.

- Model1 구조의 단점 

​	:  JSP 파일에서 모두 처리하므로 역할 구분이 명확하지 않고 디버깅과 유지보수가 어렵다.



#### 2. Model2 (MVC) 구조

: Model 1의 문제점을 보완

![model2]()



: 1. 브라우저의 요청을 컨트롤러가 받고 컨트롤러가 그 브라우저의 요청을 분석하여 View로 보여줄 것인지 	     	Model로 보내줄 것인지 결정하여 전송한다.

2. Model로 전송했다면 요청을 분석하여 어떠한 모델을 사용할지 정하고, 호출된 모델은 데이터들을 처리한 후 컨트롤러에게 결과를 보낸다.

3. 컨트롤러는 그 결과를 알맞은 뷰에게 보내고 뷰는 브라우저에게 응답한다.


- 모델 2는 요청은 컨트롤러가 받고 응답은 뷰가 한다.

- 모델 2 방식은 View와 Controller를 분리하므로 디자이너와 개발자의 분업이 가능하며 유지 보수에 유리하다.


> Model 1의 방식으로 웹 서비스를 개발하는 사례는 아예 없다고 봐도 무방하다고 한다.   백엔드와 프론트엔드 역할 분담이 모호하기 때문이다.



#### Controller의 처리순서 


```
Browser  ---> Servlet(Controller) 

        	  1.HTTP 요청 받음, doGet(), doPost()메소드 자동호출 

        	  2.클라이언트가 요구하는 기능을 분석(방명록의 경우 글쓰기등) 
        	  
        	  3.요청한 비즈니스 로직처리하는 Model사용,Business Logic Class 

        	  4.결과를 request 또는 session의 setAttribute()메소드를 사용하여 저장 

        	  5.알맞은 뷰 선택 

        	  6.뷰로 포워딩(또는 리다이렉트)   
             	  -> JSP로 이동
        	       -> HTTP 응답
        	        -> 브라우저 

```



#### Command Pattern에 기반한 Controller의 처리순서 

- Command Handler : Interface, 추상 클래스의 형태 
    									JSP Beans, EJB를 통해서 Command Handler를 구현한다. 


```
   Browser  -------->  Servlet(Controller) 

             			1. HTTP 요청 받음 
             			
                        2. 클라이언트가 요구하는 기능을 분석 
                        
                        3. 로직을 처리할 명령어 핸들어 생성 ----> Command Handler 
                        
                        4. 명령어 핸들러를 이용해 로직 처리 ----> 로직 처리 (Class) 
                           ->  결과 저장 
    						-> 뷰 리턴
    						
                        5. 명령어 핸들러가 리턴한 뷰로 포워딩(또는 리다이렉트) 
    						->  JSP로 이동
    							-> HTTP 응답 
    								-> 브라우저
```

